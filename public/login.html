<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no" />
    <link href="lib/bootstrap.min.css" type="text/css" rel="stylesheet" />

    <style>
      #box {
        text-align: center;
        width: 30%;
        min-width: 450px;
        margin: auto;
        padding: 20px;
        border: 2px solid black;
        border-radius: 10px;
      }

      #box .row {
        margin-top: 3px;
        margin-bottom: 3px;
      }
    </style>

    <title>Hello, world!</title>
  </head>

  <body>
    <div id="box">
      <h1>Welcome to Trivia Beat</h1>
      <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2" checked />
        <label class="form-check-label" for="inlineRadio2">Login</label>
      </div>
      <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio3" value="option3" disabled />
        <label class="form-check-label" for="inlineRadio3">Sign up (disabled)</label>
      </div>
      <form>
        <div class="row align-items-center">
          <div class="col">
            <label for="exampleInputEmail1" class="form-label">Email address</label>
          </div>
          <div class="col-8">
            <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" />
          </div>
        </div>
        <div class="row align-items-center">
          <div class="col">
            <label for="inputPassword6" class="col-form-label">Password</label>
          </div>
          <div class="col-8">
            <input type="password" id="in2" class="form-control" aria-describedby="passwordHelpInline" />
          </div>
        </div>
        <button type="button" class="btn btn-primary" id="log" text="login" onClick="login()">Login</button>
      </form>
    </div>
  </body>

  <script src="lib/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/core.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/md5.js"></script>
  <script>
    var response;
    function login() {
      $.ajax({
        url: "/login",
        type: "PUT",
        timeout: 10000,
        headers: {
          email: document.getElementById("exampleInputEmail1").value,
          password: CryptoJS.MD5(
            document.getElementById("in2").value
          ).toString()
        }
      })
        .done(function (res) {
          document.getElementById("starting").style.backgroundColor = "green";
          window.localStorage.setItem("login", JSON.stringify(res));
          location.href = "/";
        })
        .fail(function (res) {
          console.log(res);
          document.getElementById("starting").style.backgroundColor = "red";
        });
    }
  </script>

  <script src="lib/bootstrap.bundle.min.js"></script>
</html>
